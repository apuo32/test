<!-- sidebar -->
<%= render 'admin/sidebar' %>

<!-- form -->

<div class="row">
  <div class="col-md-10 offset-md-2 mb-4">
    <div class="card">
      <h5 class="card-header">新規ユーザー登録</h5>
      <div class="card-body">

        <!-- エラーメッセージ -->
        <% if @errors.present? %>
          <div class="alert alert-danger">
            <% @errors.each do |error| %>
              <p><%= error %></p>
            <% end %>
          </div>
        <% end %>

        <%= form_with(model: @user, url: {controller: 'admin/users', action: 'create' }, local: true) do |form| %>
          <div class="form-group">
            <p>
              <%= form.label :username, "ユーザー名:" %>
              <%= form.text_field :username %>
            </p>
        
            <p>
              <%= form.label :email, "メールアドレス:" %>
              <%= form.text_field :email %>
            </p>
        
            <p>
              <%= form.label :password, "パスワード:" %>
              <%= form.text_field :password %>
            </p>
        
            <p>
              <%= form.label :employee_code, "社員CD:" %>
              <%= form.number_field :employee_code %>
            </p>
        
            <p>
              <%= form.label :department_id, "部署名:" %>
              <%= form.collection_select :department_id, @departments, :id, :department_name, prompt: "選択してください" %>
            </p>
        
            <p>
              <%= form.label :evaluator_id, "評価者区分:" %>
              <%= form.collection_select :evaluator_id, @evaluators, :id, :status, prompt: "選択してください" %>
            </p>
        
            <p>
              <%= form.label :first_evaluator_id, "1次評価者:" %>
              <%= form.collection_select :first_evaluator_id, @first_evaluators, :id, :username, prompt: "選択してください" %>
            </p>
        
            <p><!-- 1時評価者も選択可能にする -->
              <%= form.label :second_evaluator_id, "2次評価者:" %>
              <%= form.collection_select :second_evaluator_id, @second_evaluators, :id, :username, prompt: "選択してください" %>
            </p>

            <p>※ 1次評価者と2次評価者が同じの場合、同じ人を選択してください</p>
        
            <p>
              <%= form.label :admin_flag, "システム管理者:" %>
              <%= form.check_box :admin_flag, {}, "true", "false" %>
            </p>
        
            <p>
              <%= form.submit "登録", class: "btn btn-sm btn-primary" %>
              <%= link_to '戻る', "/admin/users/", class: 'btn btn-sm btn-danger' %>
            </p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
